var isSame;!function(t){"object"==typeof exports&&"object"==typeof module?t(require("codemirror")):"function"==typeof define&&define.amd?define(["codemirror"],mod):t(CodeMirror)}((function(t){"use strict";var e=/[\w?.,%]+/;t.registerHelper("hint","anyword",(function(i,n){for(var o=n&&n.word||e,r=n&&n.range||500,s=n&&n.extraWords||EXTRAWORDS,a=i.getCursor(),c=i.getLine(a.line),l=a.ch,h=l;h&&o.test(c.charAt(h-1));)--h;var u=h!=l&&c.slice(h,l);u&&(u=u.toLowerCase()),isSame=s.some((t=>t.toLowerCase()===u));for(var f=n&&n.list||[],d={},p=new RegExp(o.source,"gi"),m=-1;m<=1;m+=2)for(var g=a.line,v=Math.min(Math.max(g+m*r,i.firstLine()),i.lastLine())+m;g!=v;g+=m){var y,C=i.getLine(g),x=(C=(C=C.replace(/\/{2}.*/g,"")).replace(/(=|-|\+|\*|<|>)\d+/g,"")).match(/\w+(?:,(\S+)){2}/);for(x&&(C=C.replace(x[1]," "+x[1])),C.includes("#")&&(p=new RegExp(/[\w?#.,%]+/,"gi"));y=p.exec(C);)g==a.line&&y[0].toLowerCase()===u||u&&0!=y[0].toLowerCase().lastIndexOf(u,0)||Object.prototype.hasOwnProperty.call(d,y[0])||(d[y[0]]=!0,f.push(y[0]))}f.sort(),f.reverse();let b=new Map(f.map((t=>[t.toLowerCase(),t])));(f=[...b.values()]).sort();var w=s.filter((t=>t.toLowerCase().startsWith(u||"")));w.sort(),f=f.concat(w);let N=new Map(f.map((t=>[t.toLowerCase(),t])));return(f=[...N.values()]).sort((function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())})),{list:f,from:t.Pos(a.line,h),to:t.Pos(a.line,l)}}))})),function(t){"object"==typeof exports&&"object"==typeof module?t(require("codemirror")):"function"==typeof define&&define.amd?define(["codemirror"],mod):t(CodeMirror)}((function(t){"use strict";function e(e,i){if(this.cm=e,this.options=i,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var n=this;e.on("cursorActivity",this.activityFunc=function(){n.cursorActivity()})}t.signal(this,"startCompletion",this)}t.showHint=function(t,e,i){if(!e)return t.showHint(i);i&&i.async&&(e.async=!0);var n={hint:e};if(i)for(var o in i)n[o]=i[o];return t.showHint(n)},t.defineExtension("showHint",(function(i){i=function(t,e,i){var n=t.options.hintOptions,o={};for(var r in c)o[r]=c[r];if(n)for(var r in n)void 0!==n[r]&&(o[r]=n[r]);if(i)for(var r in i)void 0!==i[r]&&(o[r]=i[r]);o.hint.resolve&&(o.hint=o.hint.resolve(t,e));return o}(this,this.getCursor("start"),i);var n=this.listSelections();if(!(n.length>1)){if(this.somethingSelected()){if(!i.hint.supportsSelection)return;for(var o=0;o<n.length;o++)if(n[o].head.line!=n[o].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var r=this.state.completionActive=new e(this,i);r.options.hint&&(t.signal(this,"startCompletion",this),r.update(!0))}})),t.defineExtension("closeHint",(function(){this.state.completionActive&&this.state.completionActive.close()}));var i=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/60)},n=window.cancelAnimationFrame||clearTimeout;function o(t){return"string"==typeof t?t:t.text}function r(t,e){for(;e&&e!=t;){if("LI"===e.nodeName.toUpperCase()&&e.parentNode==t)return e;e=e.parentNode}}function s(e,i){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=e,this.data=i,this.picked=!1;var n=this,s=e.cm,a=s.getInputField().ownerDocument,c=a.defaultView||a.parentWindow,l=this.hints=a.createElement("ul");l.setAttribute("role","listbox"),l.setAttribute("aria-expanded","true"),l.id=this.id;var h=e.cm.options.theme;l.className="CodeMirror-hints "+h,this.selectedHint=i.selectedHint||0;for(var u=i.list,f=0;f<u.length;++f){var d=l.appendChild(a.createElement("li")),p=u[f],m="CodeMirror-hint"+(f!=this.selectedHint?"":" CodeMirror-hint-active");null!=p.className&&(m=p.className+" "+m),d.className=m,f==this.selectedHint&&d.setAttribute("aria-selected","true"),d.id=this.id+"-"+f,d.setAttribute("role","option"),p.render?p.render(d,i,p):d.appendChild(a.createTextNode(p.displayText||o(p))),d.hintId=f}var g=e.options.container||a.body,v=s.cursorCoords(e.options.alignWithWord?i.from:null),y=v.left,C=v.bottom,x=!0,b=0,w=0;if(g!==a.body){var N=-1!==["absolute","relative","fixed"].indexOf(c.getComputedStyle(g).position)?g:g.offsetParent,O=N.getBoundingClientRect(),S=a.body.getBoundingClientRect();b=O.left-S.left-N.scrollLeft,w=O.top-S.top-N.scrollTop}l.style.left=y-b+"px",l.style.top=C-w+"px";var M=c.innerWidth||Math.max(a.body.offsetWidth,a.documentElement.offsetWidth),E=c.innerHeight||Math.max(a.body.offsetHeight,a.documentElement.offsetHeight);g.appendChild(l),s.getInputField().setAttribute("aria-autocomplete","list"),s.getInputField().setAttribute("aria-owns",this.id),s.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var H,L=e.options.moveOnOverlap?l.getBoundingClientRect():new DOMRect,k=!!e.options.paddingForScrollbar&&l.scrollHeight>l.clientHeight+1;if(setTimeout((function(){H=s.getScrollInfo()})),L.bottom-E>0){var T=L.bottom-L.top;if(v.top-(v.bottom-L.top)-T>0)l.style.top=(C=v.top-T-w)+"px",x=!1;else if(T>E){l.style.height=E-5+"px",l.style.top=(C=v.bottom-L.top-w)+"px";var A=s.getCursor();i.from.ch!=A.ch&&(v=s.cursorCoords(A),l.style.left=(y=v.left-b)+"px",L=l.getBoundingClientRect())}}var P,F=L.right-M;if(k&&(F+=s.display.nativeBarWidth),F>0&&(L.right-L.left>M&&(l.style.width=M-5+"px",F-=L.right-L.left-M),l.style.left=(y=v.left-F-b)+"px"),k)for(var q=l.firstChild;q;q=q.nextSibling)q.style.paddingRight=s.display.nativeBarWidth+"px";(s.addKeyMap(this.keyMap=function(t,e){var i={Up:function(){e.moveFocus(-1)},Down:function(){e.moveFocus(1)},PageUp:function(){e.moveFocus(1-e.menuSize(),!0)},PageDown:function(){e.moveFocus(e.menuSize()-1,!0)},Home:function(){e.setFocus(0)},End:function(){e.setFocus(e.length-1)},Enter:e.pick,Tab:e.pick,Esc:e.close},n=/Mac/.test(navigator.platform);isSame&&(i.Space=e.pick,i[","]=e.pick),n&&(i["Ctrl-P"]=function(){e.moveFocus(-1)},i["Ctrl-N"]=function(){e.moveFocus(1)});var o=t.options.customKeys,r=o?{}:i;function s(t,n){var o;o="string"!=typeof n?function(t){return n(t,e)}:i.hasOwnProperty(n)?i[n]:n,r[t]=o}if(o)for(var a in o)o.hasOwnProperty(a)&&s(a,o[a]);var c=t.options.extraKeys;if(c)for(var a in c)c.hasOwnProperty(a)&&s(a,c[a]);return r}(e,{moveFocus:function(t,e){n.changeActive(n.selectedHint+t,e)},setFocus:function(t){n.changeActive(t)},menuSize:function(){return n.screenAmount()},length:u.length,close:function(){e.close()},pick:function(){n.pick()},data:i})),e.options.closeOnUnfocus)&&(s.on("blur",this.onBlur=function(){P=setTimeout((function(){e.close()}),100)}),s.on("focus",this.onFocus=function(){clearTimeout(P)}));s.on("scroll",this.onScroll=function(){var t=s.getScrollInfo(),i=s.getWrapperElement().getBoundingClientRect();H||(H=s.getScrollInfo());var n=C+H.top-t.top,o=n-(c.pageYOffset||(a.documentElement||a.body).scrollTop);if(x||(o+=l.offsetHeight),o<=i.top||o>=i.bottom)return e.close();l.style.top=n+"px",l.style.left=y+H.left-t.left+"px"}),t.on(l,"dblclick",(function(t){var e=r(l,t.target||t.srcElement);e&&null!=e.hintId&&(n.changeActive(e.hintId),n.pick())})),t.on(l,"click",(function(t){var i=r(l,t.target||t.srcElement);i&&null!=i.hintId&&(n.changeActive(i.hintId),e.options.completeOnSingleClick&&n.pick())})),t.on(l,"mousedown",(function(){setTimeout((function(){s.focus()}),20)}));var I=this.getSelectedHintRange();return 0===I.from&&0===I.to||this.scrollToActive(),t.signal(i,"select",u[this.selectedHint],l.childNodes[this.selectedHint]),!0}function a(t,e,i,n){if(t.async)t(e,n,i);else{var o=t(e,i);o&&o.then?o.then(n):n(o)}}e.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&t.signal(this.data,"close"),this.widget&&this.widget.close(),t.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(e,i){var n=e.list[i],r=this;this.cm.operation((function(){n.hint?n.hint(r.cm,e,n):r.cm.replaceRange(o(n),n.from||e.from,n.to||e.to,"complete"),t.signal(e,"pick",n),r.cm.scrollIntoView()})),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(n(this.debounce),this.debounce=0);var t=this.startPos;this.data&&(t=this.data.from);var e=this.cm.getCursor(),o=this.cm.getLine(e.line);if(e.line!=this.startPos.line||o.length-e.ch!=this.startLen-this.startPos.ch||e.ch<t.ch||this.cm.somethingSelected()||!e.ch||this.options.closeCharacters.test(o.charAt(e.ch-1)))this.close();else{var r=this;this.debounce=i((function(){r.update()})),this.widget&&this.widget.disable()}},update:function(t){if(null!=this.tick){var e=this,i=++this.tick;a(this.options.hint,this.cm,this.options,(function(n){e.tick==i&&e.finishUpdate(n,t)}))}},finishUpdate:function(e,i){this.data&&t.signal(this.data,"update");var n=this.widget&&this.widget.picked||i&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=e,e&&e.list.length&&(n&&1==e.list.length?this.pick(e,0):(this.widget=new s(this,e),t.signal(e,"shown")))}},s.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var t=this.completion.cm.getInputField();t.removeAttribute("aria-activedescendant"),t.removeAttribute("aria-owns");var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var t=this;this.keyMap={Enter:function(){t.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){var t,e,i,n,o;n=rEdit.getCursor().ch,o=rEdit.getCursor().ch-this.data.list[0].length,1===n||0===n?e="":(e=" ".repeat(n-2),i=o>0?" ".repeat(o):""),isSame&&"Space"===nameKey?"If"===this.data.list[0]?this.data.list[0]=this.data.list[0]+" ":"Do"!=this.data.list[0]&&(this.data.list[0]=this.data.list[0]+" ",isSame=!1,t=0):isSame&&"Enter"===nameKey?("If"===this.data.list[0]?(this.data.list[0]=this.data.list[0]+" \n"+e+"Endif",t=1):"On"===this.data.list[0]?(this.data.list[0]=this.data.list[0]+"  Do\n\nEndon",t=2):"Do"===this.data.list[0]?(this.data.list[0]=this.data.list[0]+"\n\nEndon",t=2.2):(this.data.list[0]=this.data.list[0]+"\n"+i,t=0),isSame=!1):isSame&&","===nameKey&&(this.data.list[0]=this.data.list[0]+",",t=0,isSame=!1),"LogEntry"===this.data.list[this.selectedHint]&&(this.data.list[this.selectedHint]=this.data.list[this.selectedHint]+",''",t=3),this.completion.pick(this.data,this.selectedHint);var r=rEdit.getCursor().line,s=rEdit.getCursor().ch;if(1===t)rEdit.setCursor({line:r-1});else if(2===t)for(rEdit.setCursor({line:r-1}),rEdit.execCommand("insertSoftTab"),rEdit.setCursor({line:r-2,ch:n+1});rEdit.getCursor().ch>3;)rEdit.execCommand("indentLess");else 2.2===t?(rEdit.setCursor({line:r-1}),rEdit.execCommand("insertSoftTab")):3===t&&rEdit.setCursor({line:r,ch:s-1})},changeActive:function(e,i){if(e>=this.data.list.length?e=i?this.data.list.length-1:0:e<0&&(e=i?0:this.data.list.length-1),this.selectedHint!=e){var n=this.hints.childNodes[this.selectedHint];n&&(n.className=n.className.replace(" CodeMirror-hint-active",""),n.removeAttribute("aria-selected")),(n=this.hints.childNodes[this.selectedHint=e]).className+=" CodeMirror-hint-active",n.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",n.id),this.scrollToActive(),t.signal(this.data,"select",this.data.list[this.selectedHint],n)}},scrollToActive:function(){var t=this.getSelectedHintRange(),e=this.hints.childNodes[t.from],i=this.hints.childNodes[t.to],n=this.hints.firstChild;e.offsetTop<this.hints.scrollTop?this.hints.scrollTop=e.offsetTop-n.offsetTop:i.offsetTop+i.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=i.offsetTop+i.offsetHeight-this.hints.clientHeight+n.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var t=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-t),to:Math.min(this.data.list.length-1,this.selectedHint+t)}}},t.registerHelper("hint","auto",{resolve:function(e,i){var n,o=e.getHelpers(i,"hint");if(o.length){var r=function(t,e,i){var n=function(t,e){if(!t.somethingSelected())return e;for(var i=[],n=0;n<e.length;n++)e[n].supportsSelection&&i.push(e[n]);return i}(t,o);!function o(r){if(r==n.length)return e(null);a(n[r],t,i,(function(t){t&&t.list.length>0?e(t):o(r+1)}))}(0)};return r.async=!0,r.supportsSelection=!0,r}return(n=e.getHelper(e.getCursor(),"hintWords"))?function(e){return t.hint.fromList(e,{words:n})}:t.hint.anyword?function(e,i){return t.hint.anyword(e,i)}:function(){}}}),t.registerHelper("hint","fromList",(function(e,i){var n,o=e.getCursor(),r=e.getTokenAt(o),s=t.Pos(o.line,r.start),a=o;r.start<o.ch&&/\w/.test(r.string.charAt(o.ch-r.start-1))?n=r.string.substr(0,o.ch-r.start):(n="",s=o);for(var c=[],l=0;l<i.words.length;l++){var h=i.words[l];h.slice(0,n.length)==n&&c.push(h)}if(c.length)return{list:c,from:s,to:a}})),t.commands.autocomplete=t.showHint;var c={hint:t.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[[\s=+*\-()\[\]{};:>]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};t.defineOption("hintOptions",null)})),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],t):t(CodeMirror)}((function(t){"use strict";function e(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function i(t){return t.state.search||(t.state.search=new e)}function n(t){return"string"==typeof t&&t==t.toLowerCase()}function o(t,e,i){return t.getSearchCursor(e,i,{caseFold:n(e),multiline:!0})}function r(t,e,i,n,o){t.openDialog?t.openDialog(e,o,{value:n,selectValueOnOpen:!0,bottom:t.options.search.bottom}):o(prompt(i,n))}function s(t){return t.replace(/\\([nrt\\])/g,(function(t,e){return"n"==e?"\n":"r"==e?"\r":"t"==e?"\t":"\\"==e?"\\":t}))}function a(t){var e=t.match(/^\/(.*)\/([a-z]*)$/);if(e)try{t=new RegExp(e[1],-1==e[2].indexOf("i")?"":"i")}catch(t){}else t=s(t);return("string"==typeof t?""==t:t.test(""))&&(t=/x^/),t}function c(t,e,i){e.queryText=i,e.query=a(i),t.removeOverlay(e.overlay,n(e.query)),e.overlay=function(t,e){return"string"==typeof t?t=new RegExp(t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e?"gi":"g"):t.global||(t=new RegExp(t.source,t.ignoreCase?"gi":"g")),{token:function(e){t.lastIndex=e.pos;var i=t.exec(e.string);if(i&&i.index==e.pos)return e.pos+=i[0].length||1,"searching";i?e.pos=i.index:e.skipToEnd()}}}(e.query,n(e.query)),t.addOverlay(e.overlay),t.showMatchesOnScrollbar&&(e.annotate&&(e.annotate.clear(),e.annotate=null),e.annotate=t.showMatchesOnScrollbar(e.query,n(e.query)))}function l(e,n,o,s){var a=i(e);if(a.query)return h(e,n);var l=e.getSelection()||a.lastQuery;if(l instanceof RegExp&&"x^"==l.source&&(l=null),o&&e.openDialog){var f=null,p=function(i,n){t.e_stop(n),i&&(i!=a.queryText&&(c(e,a,i),a.posFrom=a.posTo=e.getCursor()),f&&(f.style.opacity=1),h(e,n.shiftKey,(function(t,i){var n;i.line<3&&document.querySelector&&(n=e.display.wrapper.querySelector(".CodeMirror-dialog"))&&n.getBoundingClientRect().bottom-4>e.cursorCoords(i,"window").top&&((f=n).style.opacity=.4)})))};!function(t,e,i,n,o){t.openDialog(e,n,{value:i,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){u(t)},onKeyUp:o,bottom:t.options.search.bottom})}(e,d(e),l,p,(function(n,o){var r=t.keyName(n);"Enter"!=r&&o!=a.queryText&&(c(e,a,o),e.execCommand("goLineUp"),a.posFrom=a.posTo=e.getCursor(),h(e,n.shiftKey));var s=e.getOption("extraKeys"),l=s&&s[r]||t.keyMap[e.getOption("keyMap")][r];"findNext"==l||"findPrev"==l||"findPersistentNext"==l||"findPersistentPrev"==l?(t.e_stop(n),c(e,i(e),o),e.execCommand(l)):"find"!=l&&"findPersistent"!=l||(t.e_stop(n),p(o,n))})),s&&l&&(c(e,a,l),h(e,n))}else r(e,d(e),"Search for:",l,(function(t){t&&!a.query&&e.operation((function(){c(e,a,t),a.posFrom=a.posTo=e.getCursor(),h(e,n)}))}))}function h(e,n,r){e.operation((function(){const s=i(e);let a=o(e,s.query,n?s.posFrom:s.posTo);var c,l;(a.find(n)||(a=o(e,s.query,n?t.Pos(e.lastLine()):t.Pos(e.firstLine(),0)),a.find(n)))&&(c=a.from(),l=a.to(),e.__searchNextHighlight&&e.__searchNextHighlight.clear(),e.__searchNextHighlight=e.markText(c,l,{className:"search-next-highlight"}),e.setSelection(a.from(),a.to()),e.scrollIntoView({from:a.from(),to:a.to()},20),s.posFrom=a.from(),s.posTo=a.to(),r&&r(a.from(),a.to()))}))}function u(t){t.operation((function(){var e=i(t);e.lastQuery=e.query,e.query&&(e.query=e.queryText=null,t.removeOverlay(e.overlay),e.annotate&&(e.annotate.clear(),e.annotate=null))}))}function f(t,e){var i=t?document.createElement(t):document.createDocumentFragment();for(var n in e)i[n]=e[n];for(var o=2;o<arguments.length;o++){var r=arguments[o];i.appendChild("string"==typeof r?document.createTextNode(r):r)}return i}function d(t){var e=f("label",{className:"CodeMirror-search-label"},t.phrase("Search:"),f("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field",id:"CodeMirror-search-field"}));return e.setAttribute("for","CodeMirror-search-field"),f("",null,e," ",f("span",{style:"color: #666",className:"CodeMirror-search-hint"},t.phrase("(Use /re/ syntax for regexp search)")))}function p(t,e,i){t.operation((function(){for(var n=o(t,e);n.findNext();)if("string"!=typeof e){var r=t.getRange(n.from(),n.to()).match(e);n.replace(i.replace(/\$(\d)/g,(function(t,e){return r[e]})))}else n.replace(i)}))}function m(t,e){if(!t.getOption("readOnly")){var n=t.getSelection()||i(t).lastQuery,c=e?t.phrase("Replace all:"):t.phrase("Replace:"),l=f("",null,f("span",{className:"CodeMirror-search-label"},c),function(t){return f("",null," ",f("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",f("span",{style:"color: #666",className:"CodeMirror-search-hint"},t.phrase("(Use /re/ syntax for regexp search)")))}(t));r(t,l,c,n,(function(i){i&&(i=a(i),r(t,function(t){return f("",null,f("span",{className:"CodeMirror-search-label"},t.phrase("With:"))," ",f("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"}))}(t),t.phrase("Replace with:"),"",(function(n){if(n=s(n),e)p(t,i,n);else{u(t);var r=o(t,i,t.getCursor("from")),a=function(){var e,s,l,h=r.from();!(e=r.findNext())&&(r=o(t,i),!(e=r.findNext())||h&&r.from().line==h.line&&r.from().ch==h.ch)||(t.setSelection(r.from(),r.to()),t.scrollIntoView({from:r.from(),to:r.to()}),s=r.from(),l=r.to(),t.__searchNextHighlight&&t.__searchNextHighlight.clear(),t.__searchNextHighlight=t.markText(s,l,{className:"search-next-highlight"}),function(t,e,i,n){t.openConfirm?t.openConfirm(e,n):confirm(i)&&n[0]()}(t,function(t){return f("",null,f("span",{className:"CodeMirror-search-label"},t.phrase("Replace?"))," ",f("button",{},t.phrase("Yes"))," ",f("button",{},t.phrase("No"))," ",f("button",{},t.phrase("All"))," ",f("button",{},t.phrase("Stop")))}(t),t.phrase("Replace?"),[function(){c(e)},a,function(){p(t,i,n)}]))},c=function(t){r.replace("string"==typeof i?n:n.replace(/\$(\d)/g,(function(e,i){return t[i]}))),a()};a()}})))}))}}t.defineOption("search",{bottom:!1}),t.commands.find=function(t){},t.commands.findPersistent=function(t){u(t),l(t,!1,!0)},t.commands.findPersistentNext=function(t){l(t,!1,!0,!0)},t.commands.findPersistentPrev=function(t){l(t,!0,!0,!0)},t.commands.findNext=l,t.commands.findPrev=function(t){l(t,!0)},t.commands.clearSearch=u,t.commands.replace=m,t.commands.replaceAll=function(t){m(t,!0)}})),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}((function(t){"use strict";var e,i,n=t.Pos;function o(t,e){for(var i=function(t){var e=t.flags;return null!=e?e:(t.ignoreCase?"i":"")+(t.global?"g":"")+(t.multiline?"m":"")}(t),n=i,o=0;o<e.length;o++)-1==n.indexOf(e.charAt(o))&&(n+=e.charAt(o));return i==n?t:new RegExp(t.source,n)}function r(t){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(t.source)}function s(t,e,i){e=o(e,"g");for(var r=i.line,s=i.ch,a=t.lastLine();r<=a;r++,s=0){e.lastIndex=s;var c=t.getLine(r),l=e.exec(c);if(l)return{from:n(r,l.index),to:n(r,l.index+l[0].length),match:l}}}function a(t,e,i){if(!r(e))return s(t,e,i);e=o(e,"gm");for(var a,c=1,l=i.line,h=t.lastLine();l<=h;){for(var u=0;u<c&&!(l>h);u++){var f=t.getLine(l++);a=null==a?f:a+"\n"+f}c*=2,e.lastIndex=i.ch;var d=e.exec(a);if(d){var p=a.slice(0,d.index).split("\n"),m=d[0].split("\n"),g=i.line+p.length-1,v=p[p.length-1].length;return{from:n(g,v),to:n(g+m.length-1,1==m.length?v+m[0].length:m[m.length-1].length),match:d}}}}function c(t,e,i){for(var n,o=0;o<=t.length;){e.lastIndex=o;var r=e.exec(t);if(!r)break;var s=r.index+r[0].length;if(s>t.length-i)break;(!n||s>n.index+n[0].length)&&(n=r),o=r.index+1}return n}function l(t,e,i){e=o(e,"g");for(var r=i.line,s=i.ch,a=t.firstLine();r>=a;r--,s=-1){var l=t.getLine(r),h=c(l,e,s<0?0:l.length-s);if(h)return{from:n(r,h.index),to:n(r,h.index+h[0].length),match:h}}}function h(t,e,i){if(!r(e))return l(t,e,i);e=o(e,"gm");for(var s,a=1,h=t.getLine(i.line).length-i.ch,u=i.line,f=t.firstLine();u>=f;){for(var d=0;d<a&&u>=f;d++){var p=t.getLine(u--);s=null==s?p:p+"\n"+s}a*=2;var m=c(s,e,h);if(m){var g=s.slice(0,m.index).split("\n"),v=m[0].split("\n"),y=u+g.length,C=g[g.length-1].length;return{from:n(y,C),to:n(y+v.length-1,1==v.length?C+v[0].length:v[v.length-1].length),match:m}}}}function u(t,e,i,n){if(t.length==e.length)return i;for(var o=0,r=i+Math.max(0,t.length-e.length);;){if(o==r)return o;var s=o+r>>1,a=n(t.slice(0,s)).length;if(a==i)return s;a>i?r=s:o=s+1}}function f(t,o,r,s){if(!o.length)return null;var a=s?e:i,c=a(o).split(/\r|\n\r?/);t:for(var l=r.line,h=r.ch,f=t.lastLine()+1-c.length;l<=f;l++,h=0){var d=t.getLine(l).slice(h),p=a(d);if(1==c.length){var m=p.indexOf(c[0]);if(-1==m)continue t;r=u(d,p,m,a)+h;return{from:n(l,u(d,p,m,a)+h),to:n(l,u(d,p,m+c[0].length,a)+h)}}var g=p.length-c[0].length;if(p.slice(g)==c[0]){for(var v=1;v<c.length-1;v++)if(a(t.getLine(l+v))!=c[v])continue t;var y=t.getLine(l+c.length-1),C=a(y),x=c[c.length-1];if(C.slice(0,x.length)==x)return{from:n(l,u(d,p,g,a)+h),to:n(l+c.length-1,u(y,C,x.length,a))}}}}function d(t,o,r,s){if(!o.length)return null;var a=s?e:i,c=a(o).split(/\r|\n\r?/);t:for(var l=r.line,h=r.ch,f=t.firstLine()-1+c.length;l>=f;l--,h=-1){var d=t.getLine(l);h>-1&&(d=d.slice(0,h));var p=a(d);if(1==c.length){var m=p.lastIndexOf(c[0]);if(-1==m)continue t;return{from:n(l,u(d,p,m,a)),to:n(l,u(d,p,m+c[0].length,a))}}var g=c[c.length-1];if(p.slice(0,g.length)==g){var v=1;for(r=l-c.length+1;v<c.length-1;v++)if(a(t.getLine(r+v))!=c[v])continue t;var y=t.getLine(l+1-c.length),C=a(y);if(C.slice(C.length-c[0].length)==c[0])return{from:n(l+1-c.length,u(y,C,y.length-c[0].length,a)),to:n(l,u(d,p,g.length,a))}}}}function p(t,e,i,r){var c;this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=t,i=i?t.clipPos(i):n(0,0),this.pos={from:i,to:i},"object"==typeof r?c=r.caseFold:(c=r,r=null),"string"==typeof e?(null==c&&(c=!1),this.matches=function(i,n){return(i?d:f)(t,e,n,c)}):(e=o(e,"gm"),r&&!1===r.multiline?this.matches=function(i,n){return(i?l:s)(t,e,n)}:this.matches=function(i,n){return(i?h:a)(t,e,n)})}String.prototype.normalize?(e=function(t){return t.normalize("NFD").toLowerCase()},i=function(t){return t.normalize("NFD")}):(e=function(t){return t.toLowerCase()},i=function(t){return t}),p.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){var i=this.doc.clipPos(e?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(i=n(i.line,i.ch),e?(i.ch--,i.ch<0&&(i.line--,i.ch=(this.doc.getLine(i.line)||"").length)):(i.ch++,i.ch>(this.doc.getLine(i.line)||"").length&&(i.ch=0,i.line++)),0!=t.cmpPos(i,this.doc.clipPos(i))))return this.atOccurrence=!1;var o=this.matches(e,i);if(this.afterEmptyMatch=o&&0==t.cmpPos(o.from,o.to),o)return this.pos=o,this.atOccurrence=!0,this.pos.match||!0;var r=n(e?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:r,to:r},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(e,i){if(this.atOccurrence){var o=t.splitLines(e);this.doc.replaceRange(o,this.pos.from,this.pos.to,i),this.pos.to=n(this.pos.from.line+o.length-1,o[o.length-1].length+(1==o.length?this.pos.from.ch:0))}}},t.defineExtension("getSearchCursor",(function(t,e,i){return new p(this.doc,t,e,i)})),t.defineDocExtension("getSearchCursor",(function(t,e,i){return new p(this,t,e,i)})),t.defineExtension("selectMatches",(function(e,i){for(var n=[],o=this.getSearchCursor(e,this.getCursor("from"),i);o.findNext()&&!(t.cmpPos(o.to(),this.getCursor("to"))>0);)n.push({anchor:o.from(),head:o.to()});n.length&&this.setSelections(n,0)}))})),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}((function(t){function e(e,i,n){var o,r=document.body;return(o=r.appendChild(document.createElement("div"))).className=n?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof i?o.innerHTML=i:o.appendChild(i),t.addClass(r,"dialog-opened"),o}function i(t,e){t.state.currentNotificationClose&&t.state.currentNotificationClose(),t.state.currentNotificationClose=e}t.defineExtension("openDialog",(function(n,o,r){r||(r={}),i(this,null);var s=e(0,n,r.bottom),a=!1,c=this;function l(e){if("string"==typeof e)u.value=e;else{if(a)return;a=!0,t.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s),c.focus(),r.onClose&&r.onClose(s)}}var h,u=s.getElementsByTagName("input")[0];return u?(u.focus(),r.value&&(u.value=r.value,!1!==r.selectValueOnOpen&&u.select()),r.onInput&&t.on(u,"input",(function(t){r.onInput(t,u.value,l)})),r.onKeyUp&&t.on(u,"keyup",(function(t){r.onKeyUp(t,u.value,l)})),t.on(u,"keydown",(function(e){r&&r.onKeyDown&&r.onKeyDown(e,u.value,l)||((27==e.keyCode||!1!==r.closeOnEnter&&13==e.keyCode)&&(u.blur(),t.e_stop(e),l()),13==e.keyCode&&o(u.value,e))})),!1!==r.closeOnBlur&&t.on(s,"focusout",(function(t){null!==t.relatedTarget&&l()}))):(h=s.getElementsByTagName("button")[0])&&(t.on(h,"click",(function(){l(),c.focus()})),!1!==r.closeOnBlur&&t.on(h,"blur",l),h.focus()),l})),t.defineExtension("openConfirm",(function(n,o,r){i(this,null);var s=e(0,n,r&&r.bottom),a=s.getElementsByTagName("button"),c=!1,l=this,h=1;function u(){c||(c=!0,t.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s),l.focus())}a[0].focus();for(var f=0;f<a.length;++f){var d=a[f];!function(e){t.on(d,"click",(function(i){t.e_preventDefault(i),u(),e&&e(l)}))}(o[f]),t.on(d,"blur",(function(){--h,setTimeout((function(){h<=0&&u()}),200)})),t.on(d,"focus",(function(){++h}))}})),t.defineExtension("openNotification",(function(n,o){i(this,l);var r,s=e(0,n,o&&o.bottom),a=!1,c=o&&void 0!==o.duration?o.duration:5e3;function l(){a||(a=!0,clearTimeout(r),t.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s))}return t.on(s,"click",(function(e){t.e_preventDefault(e),l()})),c&&(r=setTimeout(l,c)),l}))}));