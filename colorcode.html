<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/chromoxdor/EasyColorCode/codemirror.min.css">
  <script src="https://cdn.jsdelivr.net/gh/chromoxdor/EasyColorCode/codemirror.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/chromoxdor/EasyColorCode/espeasy.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/chromoxdor/EasyColorCode/cm-plugins.min.js" id="anyword"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="icon"
    href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='44' height='44'%3E%3Crect x='0' y='0' rx='6' ry='6' width='44' height='44' style='fill:%233c3c3b' transform='rotate(0 14 20)'/%3E%3Cg transform='rotate(45 26 23)'%3E%3Crect x='4' y='15' rx='2' ry='2' width='4' height='20' style='fill:%2325a843' /%3E%3Crect x='12' y='7.5' rx='2' ry='2' width='4' height='35' style='fill:%23ffd103'/%3E%3Crect x='20' y='0' rx='2' ry='2' width='4' height='50' style='fill:%23f28d22' /%3E%3Crect x='28' y='7.5' rx='2' ry='2' width='4' height='35' style='fill:%23e9493e'/%3E%3Ccircle cx='41' cy='25' r='5' fill='white' /%3E%3C/g%3E%3C/svg%3E"
    type="image/svg+xml">
  <title>ESPeasy</title>
  <style media="screen">
    body {
      height: 100vh;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #44607a;
      font-size: 12pt;
      font-family: "Kanit", Verdana, Arial, sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    .CodeMirror {
      height: 100%;
      border-radius: 0px 0px 10px 10px;
    }

    div#framie {
      height: 100%;
      transition: 0.8s;
      padding-bottom: 60px;
    }

    iframe {
      width: 100%;
      height: 100%;
      border: 0px;
      transition: 2s;
      background-color: white;
      box-shadow: 4px 0px 13px -7px #000000;
    }

    #container {
      width: 100%;
      display: flex;
      height: 80vh;
      max-width: 900px;
      background: #f0f0f0;
      box-shadow: 0px 0px 15px 5px rgb(0 0 0 / 29%);
      overflow: hidden;
      border-radius: 10px;
      flex-direction: column;
    }


    h1 {
      color: #44607a;
      font-size: 30px;
      height: 10px;
      text-align: center;
      text-transform: uppercase;
    }

    #text {
      display: block;
      width: 100%;
      background-color: transparent;
      color: #021652;
      border: 2px solid #44607a;
      border-radius: 2px;
      resize: none;
      margin-bottom: 35px;
      height: 500px;
      padding: 10px;
      font-size: 20px;
    }

    .button {
      border: solid 1px;
      padding: 2px 5px;
      background: #00000087;
      border-radius: 5px;
      color: white;
    }

    button:hover {
      background: #387b00b8;
    }

    #rulesselect {
      width: 100%;
      display: flex;
      padding: 5px;
      justify-content: flex-end;
    }

    .search-button-group {
      display: flex;
      justify-content: flex-end;
      gap: 6px;
      margin-top: 6px;
      z-index: 16;
    }

    #rules {
      width: inherit;
      min-height: 400px;
    }

    .shortcut {
      font-size: 20px;
    }

    .subtext {
      font-size: 14px;
    }

    .sidenav {
      height: 71vh;
      padding: 4vw 0 3vw 0;
      min-width: 0;
      width: 0;
      transition: 0.8s;
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      justify-content: flex-start;
      cursor: ns-resize;
      overflow: scroll;
      -ms-overflow-style: none;
      scrollbar-width: none;
      overflow-y: scroll;
      background-image: linear-gradient(#45607a 0%, #ff000000 5%, #ff000000 95%, #45607a 100%);
    }

    .sidenav::-webkit-scrollbar {
      display: none;
      /* for Chrome, Safari, and Opera */
    }

    #scrolldown {
      position: fixed;
      padding-left: 3%;
      top: 85vh;
      transition: 0.2s;
      font-size: 30px;
      display: flex;
      align-items: flex-start;
      justify-content: flex-start;
    }

    #menueList {
      transition: 0.2s;
    }

    .sidenav div {
      width: 235px;
      text-decoration: none;
      color: inherit;
    }

    .menueItem {
      padding: 10px;
    }

    #opener {
      bottom: 0;
      z-index: 2;
      height: 60px;
      width: 100%;
      position: fixed;
      padding-top: 10px;
    }

    .open {
      background: none;
      display: flex;
      max-width: 200px;
      align-items: center;
      margin: auto;
      justify-content: space-between;
    }

    .msym {
      position: relative;
      height: 35px;
      width: 35px;
      background-color: #f0f0f0;
      border-radius: 50%;
      font-family: monospace;
      display: flex;
      align-items: center;
      font-size: 30px;
      cursor: pointer;
      justify-content: center;
      box-shadow: 0px 0px 15px 5px rgb(0 0 0 / 29%);
      transition-duration: 0.4s;
      -webkit-transition-duration: 0.4s;
      /* Safari */
    }


    .msym:after {
      content: "";
      display: block;
      position: absolute;
      border-radius: 50%;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: all 0.5s;
      box-shadow: 0 0 10px 20px rgb(255, 255, 255);
    }

    .msym:active:after {
      box-shadow: 0 0 0 0 rgb(255, 255, 255);
      position: absolute;
      border-radius: 50%;
      left: 0;
      top: 0;
      opacity: 1;
      transition: 0s;
    }

    .msym:active {
      top: 1px;
    }

    #menueList {
      color: transparent;
    }

    @media screen and (max-width: 799px) {
      div#framie {
        position: absolute;
        padding-left: 0px !important;
      }
    }

    @media screen and (max-width: 450px) {
      h1 {
        font-size: 18px;
        white-space: nowrap;
      }

      body {
        align-items: flex-start;
      }
    }
  </style>
</head>

<body>
  <div id="mySidenav" class="sidenav">
    <div id="menueList">
      <div id="scrolldown">&#9660;</div>
      <div class="menueItem">
        <div class="shortcut">Type "on" then Enter <div class="subtext">Autocomplete the Rules Block (you can also
            complete after "do" + Enter)</div>
        </div>
      </div>
      <div class="menueItem">
        <div class="shortcut">Type "if" then Enter<div class="subtext">Autocompletes the if statement</div>
        </div>
      </div>
      <div class="menueItem">
        <div class="shortcut">Ctrl+Space<div class="subtext">Opens the list of hints</div>
        </div>
      </div>
      <div class="menueItem">
        <div class="shortcut">Ctrl+S / Cmd+S<div class="subtext">Save content as textfile</div>
        </div>
      </div>
      <div class="menueItem">
        <div class="shortcut">Tab<div class="subtext">If something is selected, indent it by one indent unit. If nothing
            is selected, insert space</div>
        </div>
      </div>
      <div class="menueItem">
        <div class="shortcut">Shift+Tab<div class="subtext">Dedent the current line or selection by one indent unit
          </div>
        </div>
      </div>
      <div class="menueItem">
        <div class="shortcut">Ctrl+D / Cmd+D<div class="subtext">Delete line under cursor</div>
        </div>
      </div>
      <div class="menueItem">
        <div class="shortcut">Ctrl+F / Cmd+F<div class="subtext">Find</div>
        </div>
      </div>
      <div class="menueItem">
        <div class="shortcut">Ctrl+G / Cmd+G<div class="subtext">Find next</div>
        </div>
      </div>
      <div class="menueItem">
        <div class="shortcut">Shift+Ctrl+G / Shift+Cmd+G<div class="subtext">Find previous</div>
        </div>
      </div>
      <div class="menueItem">
        <div class="shortcut">Shift+Ctrl+F / Cmd+Option+F<div class="subtext">Replace</div>
        </div>
      </div>
      <div class="menueItem">
        <div class="shortcut">Shift+Ctrl+R / Shift+Cmd+Option+F<div class="subtext">Replace all</div>
        </div>
      </div>
      <div class="menueItem">
        <div class="shortcut">
          <div class="subtext">more shortcuts can be found <a class="link"
              href="https://defkey.com/codemirror-shortcuts" target="_blank">here</a>
          </div>
        </div>
      </div>

    </div>

  </div>
  <div id="container">
    <div style="
    width: 100%;
">
      <h1>ESPEasy Code Editor</h1>
      <div id="rulesselect"></div>
    </div>
    <textarea id="rules">
    </textarea>
  </div>
  <div id="framie"></div>
  <div id="opener">
    <div class="open">
      <span class="msym" onclick="openNav()">?</span>
      <span class="msym" onclick="splitOn(); topF()">i</span>
    </div>
  </div>
  <script>
    function openNav() {
      if (document.getElementById('mySidenav').offsetWidth === 0) {
        document.getElementById("menueList").style.transitionDelay = "0.5s";
        document.getElementById("mySidenav").style.minWidth = "280px";
        //document.getElementById("scrolldown").style.color = "white";
        //document.getElementById("scrolldown").style.transitionDelay = "0.5s";
        document.getElementById("menueList").style.color = "white";

      } else { closeNav(); }
    }
    function closeNav() {
      document.getElementById("menueList").style.transitionDelay = "0s";
      document.getElementById("mySidenav").style.minWidth = "0";
      //document.getElementById("scrolldown").style.color = "transparent";
      //document.getElementById("scrolldown").style.transitionDelay = "0s";
      document.getElementById("menueList").style.color = "transparent";
      topF();

    }
    /*document.addEventListener("mousedown", function (event) {
      if (document.getElementById('mySidenav').offsetWidth > 0)
        closeNav();
    });*/
    /*document.addEventListener("touchstart", function (event) {
      if (document.getElementById('mySidenav').offsetWidth > 0)
        closeNav();
    });*/

    function splitOn() {
      if (document.getElementById('framie').offsetWidth <= 10) { isOpen = 1; iFr(isOpen); document.getElementById('framie').style.width = "100%"; document.getElementById('framie').style.paddingLeft = "10px"; }
      else { document.getElementById('framie').style.width = "0"; document.getElementById('framie').innerHTML = ""; isOpen = 0; document.getElementById('framie').style.paddingLeft = "0px"; }
    }
    function iFr() { if (isOpen === 1) { document.getElementById('framie').innerHTML = '<iframe src="https://espeasy.readthedocs.io/en/latest/Rules/Rules.html"></iframe>'; closeNav(); } }
    function topF() { document.getElementById('mySidenav').scrollTo({ top: 0, behavior: 'smooth' }); document.body.scrollTop = 0; document.documentElement.scrollTop = 0; }

    function textI() { console.log("text"); rEdit.replaceSelection('On Do \nEndon'); rEdit.execCommand('Up'); rEdit.execCommand('Enter') }
    initCM();
    CodeMirror.commands.save = function (editor) {
      var textToWrite = editor.getValue();
      var textFileAsBlob = new Blob([textToWrite], {
        type: "text/plain;charset=utf-8"
      });
      var fileNameToSaveAs = "rules.txt";

      var downloadLink = document.createElement("a");
      downloadLink.download = fileNameToSaveAs;
      downloadLink.innerHTML = "Download File";
      if (window.webkitURL != null) {
        // Chrome allows the link to be clicked
        // without actually adding it to the DOM.
        downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);
      } else {
        // Firefox requires the link to be added to the DOM
        // before it can be clicked.
        downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
        downloadLink.onclick = destroyClickedElement;
        downloadLink.style.display = "none";
        document.body.appendChild(downloadLink);
      }

      downloadLink.click();
    };
  </script>

</body>

</html>